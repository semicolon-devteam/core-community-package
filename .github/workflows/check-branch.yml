name: Reject PR to main

on:
  pull_request:
    branches:
      - "**"

jobs:
  reject-main-pr:
    runs-on: ubuntu-latest
    steps:
      - name: âŒ Reject PRs to main unless from release/*
        run: |
          echo "ğŸ” Base branch: ${{ github.event.pull_request.base.ref }}"
          echo "ğŸ” Head branch: ${{ github.event.pull_request.head.ref }}"

          BASE="${{ github.event.pull_request.base.ref }}"
          HEAD="${{ github.event.pull_request.head.ref }}"

          if [[ "$BASE" == "main" ]]; then
            if [[ "$HEAD" =~ ^release\/.*$ ]]; then
              echo "âœ… release/* ë¸Œëœì¹˜ì—ì„œ mainìœ¼ë¡œì˜ PRì€ í—ˆìš©ë©ë‹ˆë‹¤."
            else
              echo "âŒ ì˜¤ë¥˜: release/* ë¸Œëœì¹˜ê°€ ì•„ë‹Œ ê²½ìš° main ë¸Œëœì¹˜ë¡œ PRì´ í—ˆìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤."
              exit 1
            fi
          else
            echo "â„¹ï¸ main ì´ì™¸ì˜ ë¸Œëœì¹˜ ëŒ€ìƒ PRì´ë¯€ë¡œ ì œí•œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."
          fi
