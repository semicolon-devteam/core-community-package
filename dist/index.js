"use strict";var e=require("react/jsx-runtime"),t=require("react"),r=require("@supabase/supabase-js");const n=e=>{if(null==e||""===e)return"";const t=("number"==typeof e?e.toString():e).split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.length>1?t.join("."):t[0]};var s=Object.freeze({__proto__:null,formatNumberWithComma:n,removeCommaFromString:e=>e?parseFloat(e.replace(/,/g,"")):0});function a(e,t=!1){if(!e)return"";const r=new Date(e);if(isNaN(r.getTime()))return e;const n=r.getFullYear(),s=String(r.getMonth()+1).padStart(2,"0"),a=String(r.getDate()).padStart(2,"0"),o=String(r.getHours()).padStart(2,"0"),l=String(r.getMinutes()).padStart(2,"0"),i=String(r.getSeconds()).padStart(2,"0");return t?`${n}.${s}.${a}`:`${n}.${s}.${a}. ${o}:${l}:${i}`}function o(e,t=!0){if(!e)return"";const r=new Date(e);if(isNaN(r.getTime()))return e;const n=new Date,s=Math.floor((n.getTime()-r.getTime())/1e3);if(s<60)return"ë°©ê¸ˆ ì „";const a=Math.floor(s/60);if(a<60)return`${a}ë¶„ ì „`;const o=Math.floor(a/60);return o<24?`${o}ì‹œê°„ ì „`:t?l.toChar(e,"MM.dd"):l.toChar(e,"yyyy.MM.dd. HH:mm:ss")}const l={toChar(e,t="YYYY.MM.DD. HH:MM:SS"){const r="string"==typeof e?new Date(e):e;if(!r||isNaN(r.getTime()))return"";const n={yyyy:String(r.getFullYear()),MM:String(r.getMonth()+1).padStart(2,"0"),dd:String(r.getDate()).padStart(2,"0"),HH:String(r.getHours()).padStart(2,"0"),mm:String(r.getMinutes()).padStart(2,"0"),ss:String(r.getSeconds()).padStart(2,"0")};return Object.entries(n).reduce((e,[t,r])=>e.replace(t,r),t)}};var i=Object.freeze({__proto__:null,DateUtil:l,formatDate:a,timeAgo:o});function c(e){return e&&"string"==typeof e.sub&&e.user_metadata}function d(e){return e&&"string"==typeof e.id&&e.nickname&&e.permissionType}const u=e=>e.level>=99||"admin"===e.permissionType||"super_admin"===e.permissionType,m=e=>!!e&&u(e),p=(e,t=0)=>{if(!e||"object"==typeof e&&0===Object.keys(e).length)return 0===t;if(m(e))return!0;if(d(e))return e.level>=t;if(c(e)){console.warn("[DEPRECATED] JWT ê¸°ë°˜ ê¶Œí•œ ì²´í¬ëŠ” ê¶Œì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. useAppSelector(selectUserInfo)ë¥¼ ì‚¬ìš©í•˜ì—¬ Redux storeì˜ ì‚¬ìš©ì ì •ë³´ë¥¼ í™œìš©í•˜ì„¸ìš”.");return(e.is_admin?99:e.level||1)>=t}return e.level>=t};var g=Object.freeze({__proto__:null,checkIsAdmin:u,getUserLevel:e=>e?d(e)?e.level||0:c(e)?(console.warn("[DEPRECATED] JWT ê¸°ë°˜ ë ˆë²¨ ì¡°íšŒëŠ” ê¶Œì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. useAppSelector(selectUserInfo)ë¥¼ ì‚¬ìš©í•˜ì—¬ Redux storeì˜ ì‚¬ìš©ì ì •ë³´ë¥¼ í™œìš©í•˜ì„¸ìš”."),e.is_admin?99:e.level||1):e.level||0:0,getUserPermissionType:e=>e?e.permissionType||"user":"anonymous",getUserPermissionTypeFromDB:e=>e?e.permissionType||"user":"anonymous",getUserPermissionTypeFromJWT:e=>e?e.permissionType||"user":"anonymous",hasBoardPermission:(e,t=0,r=!1)=>"free"===t||0===t||!(!r||!e)&&p(e,t),hasLevelPermission:p,isAdmin:m,isAdminOrSuperAdmin:e=>!!e&&u(e),isJWTPayload:c,isSuperAdmin:e=>!!e&&u(e),isUserObject:d,isValidUser:e=>!!e&&"string"==typeof e.id&&!!e.nickname&&!!e.permissionType});const f={sm:120,md:240,lg:480,xl:720,xxl:960};function h(e,t="md",r=70){if(!e||!e.includes("/storage/v1/object/"))return e;try{const n=e.replace("/storage/v1/object/","/storage/v1/render/image/"),s="number"==typeof t?t:f[t],a=Math.max(20,Math.min(100,r)),o=n.includes("?")?"&":"?";return`${n}${o}${`width=${s}&quality=${a}`}`}catch(t){return console.error("Failed to transform Supabase image URL:",t),e}}function x(e,t=["sm","md","lg"],r=70){const n={};return t.forEach(t=>{n[t]=h(e,t,r)}),n}function b({src:e,width:t,quality:r}){return`https://community.semi-colon.space/storage/v1/render/image/public/${e}?width=${t}&quality=${r||75}`}function y(e){if(!e||"string"!=typeof e)return e;try{const t=process.env.NEXT_PUBLIC_STORAGE_URL;if(t&&e.startsWith(t)){const r=e.replace(t,"");return r.startsWith("/")?r:`/${r}`}return e}catch(t){return console.error("Failed to normalize image src:",t),e}}function v(e,t,r){const n=y(e);return void 0!==t&&n.includes("/storage/v1/object/")?h(n,t,r):n}function N(e){if(!e||"string"!=typeof e)return!1;const t=e.toLowerCase();return t.endsWith(".gif")||t.includes(".gif?")}var w=Object.freeze({__proto__:null,IMAGE_SIZE:f,generateImageSrcSet:x,getImageProps:function(e){return N(e)?{unoptimized:!0}:{}},isAnimatedImage:function(e){return!(!e||"string"!=typeof e)&&(e.toLowerCase(),N(e))},isGifImage:N,normalizeImageSrc:y,optimizeImageSrc:v,supabaseImageLoader:b,transformSupabaseImageUrl:h});class S{static calculateUserLevel(e,t){if(!t.length)return 0;const r=[...t].sort((e,t)=>e.level-t.level);let n=0;for(const t of r){if(!(e>=t.required_points))break;n=t.level}return n}static getLevelProgress(e,t){if(!t.length)return{currentLevel:0,currentLevelPoints:0,nextLevel:1,nextLevelPoints:0,progressPercentage:0,pointsToNext:0};const r=[...t].sort((e,t)=>e.level-t.level),n=this.calculateUserLevel(e,t),s=r.find(e=>e.level===n),a=s?.required_points||0,o=r.find(e=>e.level===n+1),l=o?.level||n,i=o?.required_points||a;let c=0,d=0;if(o){const t=i-a,r=e-a;c=t>0?Math.min(100,r/t*100):100,d=Math.max(0,i-e)}else c=100,d=0;return{currentLevel:n,currentLevelPoints:a,nextLevel:l,nextLevelPoints:i,progressPercentage:Math.round(c),pointsToNext:d}}static getNextLevelInfo(e,t){if(!t.length)return{nextLevel:1,requiredPoint:0,levelUpPercentage:0,isMaxLevel:!0};const r=[...t].sort((e,t)=>e.level-t.level),n=this.calculateUserLevel(e,t),s=r.find(e=>e.level===n),a=s?.required_points||0,o=r.find(e=>e.level===n+1);if(!o)return{nextLevel:n,requiredPoint:0,levelUpPercent:100,isMaxLevel:!0};const l=o.level,i=o.required_points,c=i-a,d=e-a;return{nextLevel:l,requiredPoint:Math.max(0,i-e),levelUpPercent:c>0?Math.min(100,Math.round(d/c*100)):100,isMaxLevel:!1}}}var j=Object.freeze({__proto__:null,LevelUtil:S});const _=e=>e.replace(/_([a-z])/g,(e,t)=>t.toUpperCase()),E=e=>e.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`),$=e=>{if(null==e)return e;if(Array.isArray(e))return e.map(e=>"object"==typeof e&&null!==e?$(e):e);if("object"==typeof e){const t={};for(const[r,n]of Object.entries(e)){const e=_(r);"object"!=typeof n||null===n||Array.isArray(n)?Array.isArray(n)?t[e]=n.map(e=>"object"==typeof e&&null!==e?$(e):e):t[e]=n:t[e]=$(n)}return t}return e},C=e=>{if(null==e)return e;if(Array.isArray(e))return e.map(e=>"object"==typeof e&&null!==e?C(e):e);if("object"==typeof e){const t={};for(const[r,n]of Object.entries(e)){const e=E(r);"object"!=typeof n||null===n||Array.isArray(n)?Array.isArray(n)?t[e]=n.map(e=>"object"==typeof e&&null!==e?C(e):e):t[e]=n:t[e]=C(n)}return t}return e};var T=Object.freeze({__proto__:null,keysToCamelCase:$,keysToSnakeCase:C,toCamelCase:_,toSnakeCase:E});const k=(e,t)=>{try{const r=e.startsWith("http")?new URL(e):new URL(e,window.location.origin),n=new URLSearchParams(r.search);return Object.entries(t).forEach(([e,t])=>{n.set(e,t)}),`${r.pathname}?${n.toString()}`}catch(e){throw console.error("URL íŒŒì‹± ì˜¤ë¥˜:",e),new Error("ìœ íš¨í•˜ì§€ ì•Šì€ URLì…ë‹ˆë‹¤.")}},U=(e,t,r="/")=>{const n=sessionStorage.getItem(e);if(!n)return r;try{return k(n,t)}catch(e){return console.error("ì´ì „ URL ì²˜ë¦¬ ì˜¤ë¥˜:",e),r}};var R=Object.freeze({__proto__:null,addUrlParams:k,getPreviousUrlWithParams:U});function O(e){try{const t=e.split(".");if(3!==t.length)return console.error("Invalid JWT format"),null;const r=function(e){for(e=e.replace(/-/g,"+").replace(/_/g,"/");e.length%4;)e+="=";return decodeURIComponent(atob(e).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""))}(t[1]);return JSON.parse(r)}catch(e){return console.error("JWT ë””ì½”ë”© ì‹¤íŒ¨:",e),null}}async function A(){try{const{clientSupabase:e}=await Promise.resolve().then(function(){return Z}),{data:{session:t}}=await e.auth.getSession();return t?.access_token?O(t.access_token):null}catch(e){return console.error("í† í°ì—ì„œ ì‚¬ìš©ì ì •ë³´ ì¶”ì¶œ ì‹¤íŒ¨:",e),null}}function I(e){const t=Math.floor(Date.now()/1e3);return e.exp<=t}function P(e){const t=Math.floor(Date.now()/1e3);return e.exp-t}function L(e="sb-access-token"){if("undefined"!=typeof window)try{const t=document.cookie.split("; ").find(t=>t.startsWith(`${e}=`))?.split("=")[1];if(!t)return;const r=decodeURIComponent(t),n=JSON.parse(r),s=n?.access_token;if(!s)return;const a=O(s);if(a&&I(a)){console.log("ğŸ—‘ï¸ ë§Œë£Œëœ í† í° ê°ì§€, ì¿ í‚¤ì—ì„œ ì œê±° ì¤‘..."),document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=Lax`;["supabase-auth-token","sb-auth-token","auth-token"].forEach(e=>{document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=Lax`}),console.log("âœ… ë§Œë£Œëœ í† í° ì¿ í‚¤ ì œê±° ì™„ë£Œ")}}catch(e){console.error("âŒ ë§Œë£Œëœ í† í° ì œê±° ì¤‘ ì˜¤ë¥˜:",e)}}async function D(){try{const{clientSupabase:e}=await Promise.resolve().then(function(){return Z}),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)return L(),null;const r=O(t.access_token);return r?I(r)?(L(),await e.auth.signOut(),null):r:(L(),null)}catch(e){return console.error("í† í° ê²€ì¦ ë° ì •ë¦¬ ì‹¤íŒ¨:",e),L(),null}}function M(e){return P(e)<=300}var z,F=Object.freeze({__proto__:null,decodeJWTPayload:O,getCurrentUserFromToken:A,getTokenTimeToExpiry:P,isTokenExpired:I,removeExpiredTokenFromCookie:L,shouldRefreshToken:M,validateAndCleanToken:D});!function(e){e.NETWORK_ERROR="network_error",e.FILE_TOO_LARGE="file_too_large",e.UNSUPPORTED_FORMAT="unsupported_format",e.PERMISSION_DENIED="permission_denied",e.SERVER_ERROR="server_error",e.UPLOAD_TIMEOUT="upload_timeout",e.QUOTA_EXCEEDED="quota_exceeded",e.INVALID_POST="invalid_post"}(z||(z={}));const W={[z.FILE_TOO_LARGE]:"íŒŒì¼ í¬ê¸°ê°€ ë„ˆë¬´ í½ë‹ˆë‹¤. ì´ë¯¸ì§€ëŠ” 10MB, ë¹„ë””ì˜¤ëŠ” 100MB ì´í•˜ë¡œ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.",[z.UNSUPPORTED_FORMAT]:"ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤. JPG, PNG, GIF, WebP, MP4, AVI, MOV íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.",[z.PERMISSION_DENIED]:"íŒŒì¼ ì—…ë¡œë“œ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤. ë¡œê·¸ì¸ ìƒíƒœë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.",[z.NETWORK_ERROR]:"ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ê³  ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.",[z.SERVER_ERROR]:"ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.",[z.UPLOAD_TIMEOUT]:"ì—…ë¡œë“œ ì‹œê°„ì´ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤. íŒŒì¼ í¬ê¸°ë¥¼ í™•ì¸í•˜ê±°ë‚˜ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.",[z.QUOTA_EXCEEDED]:"ì—…ë¡œë“œ í• ë‹¹ëŸ‰ì„ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤. ë¶ˆí•„ìš”í•œ íŒŒì¼ì„ ì‚­ì œí•˜ê±°ë‚˜ ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.",[z.INVALID_POST]:"ìœ íš¨í•˜ì§€ ì•Šì€ ê²Œì‹œê¸€ì…ë‹ˆë‹¤. ê²Œì‹œê¸€ì„ ë‹¤ì‹œ ìƒì„±í•´ì£¼ì„¸ìš”."};var B=Object.freeze({__proto__:null,AuthUtils:g,DateUtil:l,DateUtils:i,IMAGE_SIZE:f,ImageUtils:w,JwtUtils:F,LevelUtil:S,LevelUtils:j,NumberUtils:s,StringUtils:T,get UploadErrorType(){return z},UrlUtils:R,addUrlParams:k,calculateUploadMetrics:function(e,t){return{startTime:t,totalFiles:e.length,completedFiles:e.filter(e=>"completed"===e.status).length,failedFiles:e.filter(e=>"failed"===e.status).length,totalBytes:e.reduce((e,t)=>e+(t.fileSize||0),0),uploadedBytes:e.reduce((e,t)=>e+(t.fileSize||0)*((t.progress||0)/100),0),retryCount:0}},calculateUploadSpeed:function(e){const t=(Date.now()-e.startTime)/1e3,r=e.uploadedBytes/1048576;return t>0?r/t:0},decodeJWTPayload:O,estimateCompletionTime:function(e){const t=Date.now()-e.startTime,r=e.uploadedBytes/e.totalBytes;if(0===r)return null;const n=t/r-t;return Math.max(0,n)},formatDate:a,formatNumberWithComma:n,generateImageSrcSet:x,getCurrentUserFromToken:A,getPreviousUrlWithParams:U,getTokenTimeToExpiry:P,getUploadErrorMessage:function(e){const t=e?.message?.toLowerCase()||"",r=e?.response?.data;if(r?.error?.code){const e=r.error.code;if(W[e])return W[e]}return t.includes("file too large")||t.includes("413")?W[z.FILE_TOO_LARGE]:t.includes("unsupported")||t.includes("invalid format")||t.includes("415")?W[z.UNSUPPORTED_FORMAT]:t.includes("permission")||t.includes("unauthorized")||t.includes("401")||t.includes("403")?W[z.PERMISSION_DENIED]:t.includes("network")||t.includes("fetch")||t.includes("timeout")||"NETWORK_ERROR"===e?.code?W[z.NETWORK_ERROR]:t.includes("quota")||t.includes("storage full")||t.includes("429")?W[z.QUOTA_EXCEEDED]:t.includes("post not found")||t.includes("invalid post")||t.includes("404")?W[z.INVALID_POST]:"íŒŒì¼ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”."},isAdmin:m,isRetryableError:function(e){const t=e?.message?.toLowerCase()||"",r=e?.response?.data?.error?.code;return![z.FILE_TOO_LARGE,z.UNSUPPORTED_FORMAT,z.PERMISSION_DENIED,z.QUOTA_EXCEEDED,z.INVALID_POST].includes(r)&&!(t.includes("file too large")||t.includes("unsupported")||t.includes("invalid format")||t.includes("permission")||t.includes("unauthorized")||t.includes("quota"))},isTokenExpired:I,keysToCamelCase:$,keysToSnakeCase:C,logUploadError:function(e,t){const r={message:e?.message||"Unknown error",stack:e?.stack,response:e?.response?.data,context:t,timestamp:(new Date).toISOString(),userAgent:navigator.userAgent};"development"===process.env.NODE_ENV&&(console.group("ğŸš¨ Upload Error"),console.error("Error Details:",r),console.groupEnd()),"production"===process.env.NODE_ENV&&console.error("Upload Error:",r)},normalizeImageSrc:y,optimizeImageSrc:v,removeExpiredTokenFromCookie:L,shouldRefreshToken:M,supabaseImageLoader:b,timeAgo:o,toCamelCase:_,toSnakeCase:E,transformSupabaseImageUrl:h,validateAndCleanToken:D});let q={};const H=t.forwardRef(({variant:t="primary",size:r="md",loading:n=!1,fullWidth:s=!1,startIcon:a,endIcon:o,disabled:l,className:i="",children:c,...d},u)=>{const m=["inline-flex items-center justify-center font-medium transition-colors","focus:outline-none focus:ring-2 focus:ring-offset-2","disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",outline:"border-2 border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-gray-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[t],{sm:"px-3 py-1.5 text-sm rounded-md",md:"px-4 py-2 text-base rounded-lg",lg:"px-6 py-3 text-lg rounded-lg"}[r],s?"w-full":"",i].filter(Boolean).join(" ");return e.jsxs("button",{ref:u,className:m,disabled:l||n,...d,children:[n&&e.jsx(()=>e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),{}),!n&&a&&e.jsx("span",{className:"mr-2",children:a}),c,!n&&o&&e.jsx("span",{className:"ml-2",children:o})]})});H.displayName="Button";const J=t.forwardRef(({label:t,error:r,helper:n,type:s="text",size:a="md",fullWidth:o=!1,startAdornment:l,endAdornment:i,className:c="",containerClassName:d="",labelClassName:u="",errorClassName:m="",helperClassName:p="",disabled:g=!1,required:f=!1,id:h,...x},b)=>{const y=h||`input-${Math.random().toString(36).substr(2,9)}`,v=`\n    \n    w-full\n    font-sans\n    text-gray-900\n    bg-white\n    border\n    rounded-lg\n    transition-all\n    duration-200\n    focus:outline-none\n    focus:ring-2\n    focus:ring-blue-500/20\n    disabled:opacity-50\n    disabled:cursor-not-allowed\n    disabled:bg-gray-50\n  \n    ${{sm:"h-8 px-2 text-sm",md:"h-10 px-3 text-sm",lg:"h-12 px-4 text-base"}[a]}\n    ${r?"border-red-500 focus:border-red-500":"border-gray-300 focus:border-blue-500 hover:border-gray-400"}\n    ${l?"pl-8":""}\n    ${i?"pr-8":""}\n    ${c}\n  `.trim().replace(/\s+/g," ");return e.jsxs("div",{className:`${o?"w-full":"w-auto"} ${d}`,children:[t&&e.jsx("label",{htmlFor:y,className:`\n            block\n            text-sm\n            font-medium\n            text-gray-700\n            mb-2\n            font-sans\n            ${f?"after:content-['*'] after:text-red-500 after:ml-1":""}\n            ${g?"opacity-50":""}\n            ${u}\n          `.trim().replace(/\s+/g," "),children:t}),e.jsxs("div",{className:"relative",children:[l&&e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none",children:l}),e.jsx("input",{ref:b,id:y,type:s,disabled:g,required:f,className:v,...x}),i&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:i})]}),r&&e.jsx("p",{className:`\n          mt-2\n          text-sm\n          text-red-500\n          font-sans\n          ${m}\n        `.trim().replace(/\s+/g," "),children:r}),n&&!r&&e.jsx("p",{className:`\n          mt-2\n          text-sm\n          text-gray-500\n          font-sans\n          ${p}\n        `.trim().replace(/\s+/g," "),children:n})]})});J.displayName="Input";const G=t.forwardRef(({options:r,value:n,onChange:s,placeholder:a="ì„ íƒí•´ì£¼ì„¸ìš”",disabled:o=!1,label:l,error:i,helper:c,size:d="md",fullWidth:u=!0,multiple:m=!1,searchable:p=!1,searchPlaceholder:g="ê²€ìƒ‰...",showIcon:f=!1,showDescription:h=!1,maxHeight:x="240px",noOptionsText:b="ì˜µì…˜ì´ ì—†ìŠµë‹ˆë‹¤",className:y="",dropdownClassName:v="",labelClassName:N="",errorClassName:w="",helperClassName:S=""},j)=>{const[_,E]=t.useState(!1),[$,C]=t.useState(""),T=t.useRef(null),k=`select-${Math.random().toString(36).substr(2,9)}`,U=t.useMemo(()=>m?null:r.find(e=>e.value===n),[r,n,m]);t.useEffect(()=>{const e=e=>{T.current&&!T.current.contains(e.target)&&(E(!1),C(""))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const R=`\n    \n    w-full\n    font-sans\n    bg-white\n    border\n    rounded-lg\n    transition-all\n    duration-200\n    focus:outline-none\n    focus:ring-2\n    focus:ring-blue-500/20\n    disabled:opacity-50\n    disabled:cursor-not-allowed\n    disabled:bg-gray-50\n    flex\n    items-center\n    justify-between\n    cursor-pointer\n  \n    ${{sm:"h-8 px-2 text-sm",md:"h-10 px-3 text-sm",lg:"h-12 px-4 text-base"}[d]}\n    ${i?"border-red-500 focus:border-red-500":"border-gray-300 focus:border-blue-500 hover:border-gray-400"}\n    ${y}\n  `.trim().replace(/\s+/g," ");return e.jsxs("div",{ref:j,className:(u?"w-full":"w-auto")+" relative",children:[l&&e.jsx("label",{htmlFor:k,className:`\n            block\n            text-sm\n            font-medium\n            text-gray-700\n            mb-2\n            font-sans\n            ${o?"opacity-50":""}\n            ${N}\n          `.trim().replace(/\s+/g," "),children:l}),e.jsxs("div",{ref:T,id:k,role:"button",tabIndex:o?-1:0,"aria-expanded":_,"aria-haspopup":"listbox",onClick:()=>{o||(E(!_),C(""))},className:R,children:[e.jsx("div",{className:"flex items-center gap-2 flex-1 overflow-hidden",children:U?e.jsx("span",{className:"truncate text-gray-900",children:U.label}):e.jsx("span",{className:"text-gray-500 truncate",children:a})}),e.jsx("svg",{className:"w-4 h-4 text-gray-400 transition-transform duration-200 flex-shrink-0 "+(_?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),_&&e.jsx("div",{className:`absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-50 overflow-hidden ${v}`,children:e.jsx("div",{className:"overflow-y-auto",style:{maxHeight:x},role:"listbox",children:0===r.length?e.jsx("div",{className:"px-3 py-8 text-center text-gray-500 text-sm",children:b}):r.map(t=>{const r=t.value===n;return e.jsx("button",{type:"button",role:"option","aria-selected":r,onClick:()=>(e=>{e.disabled||(s(e),m||(E(!1),C("")))})(t),disabled:t.disabled,className:`\n                      w-full px-3 py-2 text-left flex items-center gap-2 text-sm cursor-pointer\n                      transition-colors duration-150\n                      ${t.disabled?"opacity-50 cursor-not-allowed bg-gray-50":r?"bg-blue-50 text-blue-600":"hover:bg-gray-100 text-gray-900"}\n                      border-b border-gray-100 last:border-b-0\n                    `.trim().replace(/\s+/g," "),children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"truncate",children:t.label}),h&&t.description&&e.jsx("div",{className:"text-xs text-gray-500 mt-1 truncate",children:t.description})]})},t.id)})})}),i&&e.jsx("p",{className:`\n          mt-2\n          text-sm\n          text-red-500\n          font-sans\n          ${w}\n        `.trim().replace(/\s+/g," "),children:i}),c&&!i&&e.jsx("p",{className:`\n          mt-2\n          text-sm\n          text-gray-500\n          font-sans\n          ${S}\n        `.trim().replace(/\s+/g," "),children:c})]})});G.displayName="Select";const V=t.forwardRef(({checked:t=!1,onChange:r,label:n,error:s,helper:a,size:o="md",indeterminate:l=!1,labelPosition:i="right",disabled:c=!1,className:d="",containerClassName:u="",labelClassName:m="",errorClassName:p="",helperClassName:g="",id:f,...h},x)=>{const b=f||`checkbox-${Math.random().toString(36).substr(2,9)}`,y=`\n    \n    text-blue-600\n    bg-white\n    border-2\n    rounded\n    transition-all\n    duration-200\n    focus:outline-none\n    focus:ring-2\n    focus:ring-blue-500/20\n    focus:border-blue-500\n    disabled:opacity-50\n    disabled:cursor-not-allowed\n    disabled:bg-gray-50\n  \n    ${{sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"}[o]}\n    ${s?"border-red-500":"border-gray-300 hover:border-blue-500"}\n    ${d}\n  `.trim().replace(/\s+/g," "),v=e.jsx("input",{ref:x,id:b,type:"checkbox",checked:t,onChange:e=>{r?.(e.target.checked,e)},disabled:c,className:y,...h}),N=n&&e.jsx("label",{htmlFor:b,className:`\n        text-gray-700\n        text-xs sm:text-sm\n        font-normal\n        font-sans\n        select-none\n        ${c?"opacity-50 cursor-not-allowed":"cursor-pointer"}\n        ${m}\n      `.trim().replace(/\s+/g," "),children:n});return e.jsxs("div",{className:u,children:[e.jsxs("div",{className:"flex items-center gap-2 "+("left"===i?"flex-row-reverse":""),children:[v,N]}),s&&e.jsx("p",{className:`\n          mt-2\n          text-sm\n          text-red-500\n          font-sans\n          ${p}\n        `.trim().replace(/\s+/g," "),children:s}),a&&!s&&e.jsx("p",{className:`\n          mt-2\n          text-sm\n          text-gray-500\n          font-sans\n          ${g}\n        `.trim().replace(/\s+/g," "),children:a})]})});V.displayName="Checkbox";const K=t.forwardRef(({checked:t=!1,onChange:r,name:n,value:s,label:a,error:o,helper:l,size:i="md",labelPosition:c="right",disabled:d=!1,className:u="",containerClassName:m="",labelClassName:p="",errorClassName:g="",helperClassName:f="",children:h,id:x,...b},y)=>{const v=x||`radio-${Math.random().toString(36).substr(2,9)}`,N=h||a,w=e.jsxs("div",{className:"relative inline-flex items-center",children:[e.jsx("input",{ref:y,id:v,type:"radio",name:n,value:s,checked:t,onChange:e=>{r?.(e.target.value,e)},disabled:d,className:"sr-only",...b}),e.jsx("span",{className:`\n          flex-shrink-0 rounded-full flex items-center justify-center\n          border-2 transition-all duration-200\n          ${{sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"}[i]}\n          ${t?o?"border-red-500 bg-red-500":"border-blue-600 bg-blue-600":o?"border-red-500":"border-gray-300 hover:border-blue-600"}\n          ${d?"opacity-50 cursor-not-allowed":"cursor-pointer"}\n          ${u}\n        `.trim().replace(/\s+/g," "),children:e.jsx("span",{className:`\n            rounded-full transition-all duration-200 bg-white\n            ${{sm:"w-1.5 h-1.5",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[i]}\n            ${t?"opacity-100 scale-100":"opacity-0 scale-50"}\n          `.trim().replace(/\s+/g," ")})})]}),S=N&&e.jsx("label",{htmlFor:v,className:`\n        text-gray-700\n        text-xs sm:text-sm\n        font-normal\n        font-sans\n        whitespace-nowrap\n        select-none\n        ${d?"opacity-50 cursor-not-allowed":"cursor-pointer"}\n        ${p}\n      `.trim().replace(/\s+/g," "),children:N});return e.jsxs("div",{className:m,children:[e.jsxs("div",{className:"inline-flex items-center gap-2 "+("left"===c?"flex-row-reverse":""),children:[w,S]}),o&&e.jsx("p",{className:`\n          mt-2\n          text-sm\n          text-red-500\n          font-sans\n          ${g}\n        `.trim().replace(/\s+/g," "),children:o}),l&&!o&&e.jsx("p",{className:`\n          mt-2\n          text-sm\n          text-gray-500\n          font-sans\n          ${f}\n        `.trim().replace(/\s+/g," "),children:l})]})});K.displayName="Radio";const X=t.forwardRef(({checked:t=!1,onChange:r,label:n,error:s,helper:a,size:o="md",labelPosition:l="right",onText:i,offText:c,disabled:d=!1,className:u="",containerClassName:m="",labelClassName:p="",errorClassName:g="",helperClassName:f="",id:h,...x},b)=>{const y=h||`switch-${Math.random().toString(36).substr(2,9)}`,v={sm:{track:"w-8 h-4",thumb:"w-3 h-3",translate:"translate-x-4",text:"text-xs px-1"},md:{track:"w-10 h-5",thumb:"w-4 h-4",translate:"translate-x-5",text:"text-xs px-1.5"},lg:{track:"w-12 h-6",thumb:"w-5 h-5",translate:"translate-x-6",text:"text-sm px-2"}}[o],N=`\n    relative inline-flex items-center\n    ${v.track}\n    rounded-full\n    transition-colors duration-200 ease-in-out\n    focus-within:outline-none\n    focus-within:ring-2\n    focus-within:ring-blue-500/20\n    ${t?s?"bg-red-500":"bg-blue-600":s?"bg-red-200":"bg-gray-300"}\n    ${d?"opacity-50 cursor-not-allowed":"cursor-pointer"}\n    ${u}\n  `.trim().replace(/\s+/g," "),w=`\n    inline-block\n    ${v.thumb}\n    bg-white\n    rounded-full\n    shadow\n    transform\n    transition-transform duration-200 ease-in-out\n    ${t?v.translate:"translate-x-0.5"}\n  `.trim().replace(/\s+/g," "),S=e.jsxs("div",{className:"relative inline-flex",children:[e.jsx("input",{ref:b,id:y,type:"checkbox",checked:t,onChange:e=>{r?.(e.target.checked,e)},disabled:d,className:"sr-only",...x}),e.jsxs("label",{htmlFor:y,className:N,children:[(i||c)&&e.jsx("span",{className:`\n            absolute inset-0 flex items-center justify-center\n            font-sans font-medium text-white\n            ${v.text}\n            pointer-events-none\n          `,children:t?i:c}),e.jsx("span",{className:w})]})]}),j=n&&e.jsx("label",{htmlFor:y,className:`\n        text-gray-700\n        text-xs sm:text-sm\n        font-normal\n        font-sans\n        select-none\n        ${d?"opacity-50 cursor-not-allowed":"cursor-pointer"}\n        ${p}\n      `.trim().replace(/\s+/g," "),children:n});return e.jsxs("div",{className:m,children:[e.jsxs("div",{className:"inline-flex items-center gap-3 "+("left"===l?"flex-row-reverse":""),children:[S,j]}),s&&e.jsx("p",{className:`\n          mt-2\n          text-sm\n          text-red-500\n          font-sans\n          ${g}\n        `.trim().replace(/\s+/g," "),children:s}),a&&!s&&e.jsx("p",{className:`\n          mt-2\n          text-sm\n          text-gray-500\n          font-sans\n          ${f}\n        `.trim().replace(/\s+/g," "),children:a})]})});X.displayName="Switch";const Y=t.forwardRef(({label:r,error:n,helper:s,size:a="md",fullWidth:o=!1,autoResize:l=!1,minHeight:i=80,maxHeight:c=300,maxLength:d,showCount:u=!1,disabled:m=!1,required:p=!1,className:g="",containerClassName:f="",labelClassName:h="",errorClassName:x="",helperClassName:b="",countClassName:y="",value:v,onChange:N,id:w,...S},j)=>{const _=w||`textarea-${Math.random().toString(36).substr(2,9)}`,[E,$]=t.useState(i),C=t.useCallback(e=>{if(!l)return;e.style.height="auto";const t=e.scrollHeight,r=Math.min(Math.max(t,i),c);$(r),e.style.height=`${r}px`},[l,i,c]),T=`\n    \n    w-full\n    font-sans\n    text-gray-900\n    bg-white\n    border\n    rounded-lg\n    transition-all\n    duration-200\n    focus:outline-none\n    focus:ring-2\n    focus:ring-blue-500/20\n    disabled:opacity-50\n    disabled:cursor-not-allowed\n    disabled:bg-gray-50\n    resize-none\n  \n    ${{sm:"px-2 py-1.5 text-sm",md:"px-3 py-2 text-sm",lg:"px-4 py-3 text-base"}[a]}\n    ${n?"border-red-500 focus:border-red-500":"border-gray-300 focus:border-blue-500 hover:border-gray-400"}\n    ${l?"resize-none":"resize-y"}\n    ${g}\n  `.trim().replace(/\s+/g," "),k="string"==typeof v?v.length:0,U=!!d&&k>d;return e.jsxs("div",{className:`${o?"w-full":"w-auto"} ${f}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r&&e.jsx("label",{htmlFor:_,className:`\n              block\n              text-sm\n              font-medium\n              text-gray-700\n              font-sans\n              ${p?"after:content-['*'] after:text-red-500 after:ml-1":""}\n              ${m?"opacity-50":""}\n              ${h}\n            `.trim().replace(/\s+/g," "),children:r}),u&&(d||k>0)&&e.jsxs("span",{className:`\n            text-sm\n            font-sans\n            ${U?"text-red-500":k/(d||100)>.8?"text-orange-500":"text-gray-500"}\n            ${y}\n          `.trim().replace(/\s+/g," "),children:[k,d&&`/${d}`]})]}),e.jsx("textarea",{ref:j,id:_,value:v,onChange:e=>{d&&e.target.value.length>d||(N?.(e),l&&C(e.target))},disabled:m,required:p,maxLength:d,className:T,style:l?{height:E,minHeight:i,maxHeight:c}:{minHeight:i},...S}),e.jsxs("div",{className:"flex justify-between items-start mt-2",children:[e.jsxs("div",{className:"flex-1",children:[n&&e.jsx("p",{className:`\n              text-sm\n              text-red-500\n              font-sans\n              ${x}\n            `.trim().replace(/\s+/g," "),children:n}),s&&!n&&e.jsx("p",{className:`\n              text-sm\n              text-gray-500\n              font-sans\n              ${b}\n            `.trim().replace(/\s+/g," "),children:s})]}),u&&!r&&(d||k>0)&&e.jsxs("span",{className:`\n            text-sm\n            font-sans\n            ml-2\n            flex-shrink-0\n            ${U?"text-red-500":k/(d||100)>.8?"text-orange-500":"text-gray-500"}\n            ${y}\n          `.trim().replace(/\s+/g," "),children:[k,d&&`/${d}`]})]})]})});Y.displayName="TextArea";const Q=function(){const e=r.createClient(process.env.NEXT_PUBLIC_SUPABASE_URL,process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storageKey:"sb-access-token",storage:{getItem:e=>{if("undefined"==typeof window)return null;try{const t=document.cookie.split("; ").find(t=>t.startsWith(`${e}=`))?.split("=")[1];if(!t)return null;const r=decodeURIComponent(t);try{const t=JSON.parse(r);t?.access_token&&import("@util/jwtUtil").then(({decodeJWTPayload:r,isTokenExpired:n,removeExpiredTokenFromCookie:s})=>{const a=r(t.access_token);a&&n(a)&&(console.log("ğŸ—‘ï¸ í´ë¼ì´ì–¸íŠ¸ Storage: ë§Œë£Œëœ í† í° ê°ì§€, ì •ë¦¬ ì¤‘..."),s(e))})}catch(e){console.warn("í´ë¼ì´ì–¸íŠ¸ Storage: ì„¸ì…˜ ë°ì´í„° íŒŒì‹± ì‹¤íŒ¨:",e)}return r}catch(e){return console.error("âŒ í´ë¼ì´ì–¸íŠ¸: ì¿ í‚¤ ì½ê¸° ì‹¤íŒ¨:",e),null}},setItem:(e,t)=>{if("undefined"!=typeof window)try{if(!JSON.parse(t).access_token)return;const r=encodeURIComponent(t),n=new Date;n.setDate(n.getDate()+30),document.cookie=`${e}=${r}; expires=${n.toUTCString()}; path=/; SameSite=Lax; Secure`}catch(e){}},removeItem:e=>{if("undefined"!=typeof window)try{document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`}catch(e){}}}}});if("undefined"!=typeof window){let t=!1;e.auth.onAuthStateChange((r,n)=>{switch(r){case"SIGNED_OUT":t||(t=!0,e.auth.getSession().then(()=>{t=!1}));break;case"TOKEN_REFRESHED":break;case"USER_UPDATED":n||t||(t=!0,e.auth.signOut().then(()=>{t=!1}))}})}return e}();var Z=Object.freeze({__proto__:null,clientSupabase:Q});exports.Avatar=({src:r,name:n="",size:s="md",status:a,square:o=!1,className:l="",alt:i,...c})=>{const[d,u]=t.useState(!1),[m,p]=t.useState(!1),g=["inline-block relative",o?"rounded-lg":"rounded-full","bg-gray-100 overflow-hidden","ring-2 ring-white",{xs:"w-6 h-6 text-xs",sm:"w-8 h-8 text-sm",md:"w-10 h-10 text-base",lg:"w-12 h-12 text-lg",xl:"w-14 h-14 text-xl","2xl":"w-16 h-16 text-2xl"}[s]],f=r?y(r):void 0,h=[...g,l].filter(Boolean).join(" ");return e.jsxs("div",{className:h,children:[f&&!d?e.jsx("img",{src:f,alt:i||n,className:"w-full h-full object-cover",onError:()=>{u(!0)},onLoad:()=>{p(!0)},...c}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-300 text-gray-600 font-medium",children:(e=>e.split(" ").map(e=>e.charAt(0).toUpperCase()).join("").slice(0,2))(n)||"?"}),a&&e.jsx("span",{className:`absolute bottom-0 right-0 block ${{xs:"w-1.5 h-1.5",sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3",xl:"w-3.5 h-3.5","2xl":"w-4 h-4"}[s]} ${{online:"bg-green-400",offline:"bg-gray-400",away:"bg-yellow-400",busy:"bg-red-400"}[a]} rounded-full ring-2 ring-white`,title:`Status: ${a}`,"aria-label":`User status: ${a}`})]})},exports.Badge=({variant:t="primary",size:r="md",rounded:n=!1,dot:s=!1,className:a="",children:o,...l})=>{const i={primary:"bg-blue-400",secondary:"bg-gray-400",success:"bg-green-400",warning:"bg-yellow-400",danger:"bg-red-400",info:"bg-indigo-400"},c=[...["inline-flex items-center font-medium",n?"rounded-full":"rounded-md"],{primary:"bg-blue-100 text-blue-800",secondary:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-indigo-100 text-indigo-800"}[t],{sm:"px-2 py-1 text-xs",md:"px-2.5 py-1.5 text-sm",lg:"px-3 py-2 text-base"}[r],a].filter(Boolean).join(" ");return e.jsxs("span",{className:c,...l,children:[s&&e.jsx(()=>e.jsx("span",{className:`w-2 h-2 rounded-full mr-1.5 ${i[t]}`,"aria-hidden":"true"}),{}),o]})},exports.Button=H,exports.Checkbox=V,exports.Input=J,exports.PACKAGE_NAME="@team-semicolon/community-core",exports.Radio=K,exports.Select=G,exports.Switch=X,exports.TextArea=Y,exports.Utils=B,exports.VERSION="1.0.2",exports.formatDate=a,exports.formatNumberWithComma=n,exports.getPackageConfig=function(){return Object.freeze({...q})},exports.initializeCommunityCore=function(e){q={...q,...e},e.development&&console.log("ğŸš€ @semicolon/community-core initialized with config:",q)},exports.isAdmin=m,exports.timeAgo=o;
//# sourceMappingURL=index.js.map
